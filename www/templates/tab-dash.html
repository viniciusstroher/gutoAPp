<ion-view view-title="Sala automação">
  <ion-content class="padding">
  	<ion-refresher pulling-text="Atualizando" on-refresh="atualizaDados()"  refreshing-text="Atualizando ..." refreshing-icon="ion-loading-b" ></ion-refresher>
    <center>
    <h2>Estado da sala</h2>


    <div style="display:flex;font-size:20px">
      <div align="left" >
        <p ng-if="!dadosInvalidos">
          <span>Atualizado em : {{dados.data}} as {{dados.hora}}</span><br/>
       		<span>Luminosidade: </span>{{dados.luminosidade}}<br/>
          <span>Luminosidade2: </span>{{dados.luminosidade2}}<br/><br/>
       		<span>Movimentacao: </span>{{dados.movimentacao}}<br/>
       		<span>Movimentacao 2: </span>{{dados.movimentacao2}}<br/><br/>
       		<span>Temperatura: </span>{{dados.temperatura}}<br/>
          <span>Temperatura2: </span>{{dados.temperatura2}}<br/>
        </p>
        <p ng-if="dadosInvalidos">Arduino mestre não está conectado.</p></br>

        <p ng-if="!dadosInvalidosVoltagem1">
          <span>Atualizado em : {{dadosVoltagem1.data}} as {{dadosVoltagem1.hora}}</span><br/>
          <span>Corrente Sala 02: </span>{{dadosVoltagem1.corrente}} <b>A</b><br/>
          <span>Potencia Sala 02: </span>{{dadosVoltagem1.corrente*220}} <b>W</b><br/>
        </p>
        <p ng-if="dadosInvalidosVoltagem1">Arduino Sala02 não está conectado.</p></br>

        <p ng-if="!dadosInvalidosVoltagem2">
          <span>Atualizado em : {{dadosVoltagem2.data}} as {{dadosVoltagem2.hora}}</span><br/>
          <span>Corrente Sala 03: </span>{{dadosVoltagem2.corrente}} <b>A</b><br/>
          <span>Potencia Sala 03: </span>{{dadosVoltagem2.corrente*220}} <b>W</b><br/>
          
        </p>
        <p ng-if="dadosInvalidosVoltagem2">Arduino Sala03 não está conectado.</p></br>
      </div>
      
      
      
      <div align="left" style="margin-left:20px">
          IP:   <input ng-model="modelo.ip" /><br/>
          <br/>
          LDR1 Corte: <input ng-model="modelo.ldr1" /><button class="button button-small" ng-click="atualizaLDR1()">Atualiza</button><br/>
          LDR2 Corte: <input ng-model="modelo.ldr2" /><button class="button button-small" ng-click="atualizaLDR2()">Atualiza</button><br/>
          LDR1 Fator Correcao: <input ng-model="modelo.ldr1_fator" /><button class="button button-small" ng-click="atualizaLdr1Fator()">Atualiza</button><br/>
          LDR2 Fator Correcao: <input ng-model="modelo.ldr2_fator" /><button class="button button-small" ng-click="atualizaLdr2Fator()">Atualiza</button><br/> 
          <br/>
          Tempo de Resposta: <input ng-model="modelo.tdp" />MS<button class="button button-small" ng-click="atualizaMS()">Atualiza</button><br/>

         Amostras: <input ng-model="modelo.amostras" /><button class="button button-small" ng-click="atualizaAmostras()">Atualiza</button><br/>
          <br/>
          Modo Pir: <button class="button button-small" ng-click="atualizaPirModeBtnClk(true)">Ativado</button><button class="button button-small" ng-click="atualizaPirModeBtnClk(false)">Desativado</button><br/>
          Tempo Re Armar: <input ng-model="modelo.tempoReArmar" />MS<button class="button button-small" ng-click="atualizaPirReArmar()">Atualiza</button><br/>
          <br/>
          <br/>
          Tempo CSV Mestre: <input ng-model="modelo.csv_time_mestre" />MS<button class="button button-small" ng-click="atualizaCsvTimeMestre()">Atualiza</button><br/>
          Tempo CSV Sala 02: <input ng-model="modelo.csv_time_sala02" />MS<button class="button button-small" ng-click="atualizaCsvTimeSala02()">Atualiza</button><br/>
          Tempo CSV Sala 03: <input ng-model="modelo.csv_time_sala03" />MS<button class="button button-small" ng-click="atualizaCsvTimeSala03()">Atualiza</button><br/>

      </div>
    </div>

    <br/>
    <br/>
    <div align="center" style="display:flex;width:100%">

      <div style="width:33%">
        <span>1 rele </span><br/>
        <button class="button button-small" ng-click="ligaRele1()">Liga</button>
        <button class="button button-small" ng-click="desligaRele1()">Desliga</button>
      </div>

      <div style="width:33%">
        <span>2 rele </span><br/>
        <button class="button button-small" ng-click="ligaRele2()">Liga</button>
        <button class="button button-small" ng-click="desligaRele2()">Desliga</button><br/>
      </div>
      <div style="width:33%">
        <span>3 rele</span><br/>
        <button class="button button-small" ng-click="ligaRele3()">Liga</button>
        <button class="button button-small" ng-click="desligaRele3()">Desliga</button><br/>
      </div>
    </div>


  </ion-content>
</ion-view>
